/* === Theme (tweak these) === */
:root {
  --pos-col-w: 44px;      /* "#" col */
  --race-col-w: 54px;     /* each race col */
  --points-col-w: 84px;   /* "Points" col */
  --driver-min-w: 120px;  /* minimum driver column */
  --header-bg: rgb(0, 76, 169);
  --row-bg: linear-gradient(to bottom, rgb(0, 90, 199), rgb(0, 50, 110));
  --row-hover: rgba(200, 200, 200, 0.6);
  --text: #ffffff;
}

/* === Page container bits you already have (kept) === */
.table-container {
  width: 90%;
  max-width: min(92vw, 1400px); /* controls how wide it can get */
  margin: 0 auto;               /* centers inside main content */
  padding: 0 12px;
}

/* === Header table (separate table only for thead) === */
.header-table {
  width: 100%;
  border-collapse: collapse;
  table-layout: fixed;              /* important */
  background: var(--header-bg);
  color: var(--text);
  box-shadow: 0 2px 5px rgba(0,0,0,.3);
}

/* Use the same model for the scrollable body table */
.scrollable-table table {
  width: 100%;
  border-collapse: collapse;
  table-layout: fixed;              /* important */
  background: var(--row-bg);
  color: var(--text);
}

.header-table th,
.scrollable-table td {
  text-align: center;
  white-space: nowrap;
  overflow: hidden;          /* clip any overflowed content */
  text-overflow: ellipsis;   /* show … if it doesn't fit */
  border: 1px solid rgba(255, 255, 255, 0.129);
  color: white;
}

/* Title row */
.header-title th {
  font-size: 1.05rem;
  font-weight:750;
}

/* Sticky header effect is achieved by separate table; just keep body scrollable */
.scrollable-wrapper {
  width: 100%;
  max-width: 100%;
  overflow-y: auto;
  max-height: 60vh;
  margin: 0 auto;
  box-shadow: 0 2px 5px rgba(0,0,0,.3);
}

/* Slender scrollbar */
.scrollable-wrapper::-webkit-scrollbar { width: 0.5px; }
.scrollable-wrapper::-webkit-scrollbar-track { background: transparent; }
.scrollable-wrapper::-webkit-scrollbar-thumb {
  background: rgba(255,255,255,.38);
  border-radius: 3px;
}

.scrollable-table td:nth-child(2), .scrollable-table td:last-child { background-color: #194081; }

/* --- Column-specific sizing via <colgroup> classes --- */
.col-pos    { width: var(--pos-col-w); }
.col-driver {
  width: clamp(120px, 16vw, 160px); /* min, preferred, max */
}
.col-race {
  width: clamp(30px, 40px, 160px); /* min, preferred, max */
}
.col-points { width: var(--points-col-w); }

/* Flags should never size the column */
.race-flag {
  width: 100%;
  height: auto;
  object-fit: cover;
  vertical-align: middle;
  filter: drop-shadow(0 0 0 rgba(0,0,0,0));
  transition: filter .25s ease;
}
.race-flag:hover { filter: drop-shadow(0 0 6px aliceblue); }

/* Race links */
.race-link {
  text-decoration: none;
  color: white;
  font-weight: 700;
  transition: color .2s;
}
.race-link:hover { 
  color: #4caeff; 
  text-decoration: none; 
}

.race-dnf {
  text-decoration: none;
  color: rgb(200, 50, 50);
  font-weight: 800;
  letter-spacing: .25px;
}

.race-dnf:hover {
  color: rgb(198, 92, 92);
  transition: color 0.2s ease;
  text-decoration: none ;
}

/* Hover row */
.scrollable-table tbody tr:hover { background: var(--row-hover); } /* Round cols */
.scrollable-table tbody tr:hover td:nth-child(2),   /* Driver col */
.scrollable-table tbody tr:hover td:last-child {   /* Points col */
  background: #3669c2;
}


/* Position coloring (first cell in body rows) */
.scrollable-table tbody tr:nth-child(1) td:first-child { color: rgb(255,215,0);   font-weight: 800; }
.scrollable-table tbody tr:nth-child(2) td:first-child { color: rgb(211,211,211); font-weight: 800; }
.scrollable-table tbody tr:nth-child(3) td:first-child { color: rgb(165,107,49);  font-weight: 800; }

/* Leftmost cell styling */
.scrollable-table tbody td:first-child {
  background: var(--header-bg);
  font-weight: 800;
}

/* Hide mobile header by default */
.header-table--mobile { display: none; }
.header-table caption { display: none; }

/* === MOBILE: show only the 3rd header row, and only # / Driver / Points === */
@media (max-width: 700px) {
  /* keep header table visible */
  .header-table {
    display: table !important;
    width: 100%;
    table-layout: fixed;
    border-collapse: collapse;
    background: var(--header-bg);
    color: var(--text);
    border-radius: 10px 10px 0 0;
    box-shadow: 0 2px 5px rgba(0,0,0,.3);
  }

  /* hide row 1 (title) and row 2 (flags); keep only row 3 */
  .header-table thead tr:nth-child(1),
  .header-table thead tr:nth-child(2),
  .header-table thead tr:nth-child(n+4) {
    display: none !important;
  }

  /* in the 3rd row, hide race headers by class, keep the others */
  .header-table thead tr.header-cols .col-race { display: none !important; }
  .header-table thead tr.header-cols .col-pos,
  .header-table thead tr.header-cols .col-driver,
  .header-table thead tr.header-cols .col-points {
    display: table-cell !important;
  }

  /* body: hide race columns as well */
  .header-table col.col-race,
  .scrollable-table col.col-race { display: none !important; }
  .scrollable-table table tbody td:nth-child(n+3):not(:last-child) {
    display: none !important;
  }

  /* widths for the remaining 3 columns */
  .scrollable-table table { table-layout: fixed; width: 100% !important; }
  .col-pos    { width: 12% !important; }
  .col-driver { width: 68% !important; }
  .col-points { width: 20% !important; }

  /* contain layout */
  .table-container,
  .scrollable-wrapper {
    width: 100% !important;
    max-width: 100vw !important;
    margin: 0 !important;
    padding: 0 !important;
    overflow-x: hidden !important;
    box-sizing: border-box;
  }

  .scrollable-table td {
    padding: 6px 8px;
    font-size: 0.95rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .header-table::before { content: none !important; }

  /* show caption above the header row */
  .header-table caption.header-caption {
    display: table-caption;      /* proper table caption */
    caption-side: top;           /* sits above the thead */
    text-align: center;
    font-weight: 750;
    padding: 8px 0;
    color: #fff;
    border-bottom: 1px solid rgba(255,255,255,.15);
    background: var(--header-bg);
  }

  /* Table & caption act as one rounded card */
  .header-table {
    /* keep your existing styles */
    border-collapse: separate;      /* needed for clean radii with caption */
    border-spacing: 0;
    overflow: hidden;               /* clip inner corners */
    border-radius: 0 0 10px 10px;   /* bottom corners only (caption owns top) */
  }

  /* Caption is the top bar */
  .header-table caption.header-caption {
    display: table-caption;
    caption-side: top;
    background: var(--header-bg);
    color: #fff;
    font-weight: 750;
    text-align: center;
    padding: 8px 10px;
    border-radius: 10px 10px 0 0;   /* top corners */
    border-bottom: 1px solid rgba(255,255,255,.15); /* seam that matches cell borders */
    margin: 0;
  }

  /* Remove top border on the first visible header row so it connects to caption */
  .header-table thead tr.header-cols th {
    border-top: 0 !important;
  }

  /* Optional: make the outer edge match the table’s rounded shape */
  .header-table thead tr.header-cols th:first-child { border-left: 0; }
  .header-table thead tr.header-cols th:last-child  { border-right: 0; }
}
